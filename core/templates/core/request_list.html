{% extends 'core/base.html' %}
{% block content %}
<h2>All Requests</h2>

<ul class="list-group">
    {% for req in requests %}
        <div class="card mb-3">
            <div class="card-body">
            <h5 class="card-title">{{ req.title }}</h5>
            <p class="card-text">{{ req.description }}</p>
            <p><strong>Category:</strong> {{ req.category }}</p>
            <p><strong>Location:</strong> {{ req.location }}</p>
            <p><strong>Status:</strong> {{ req.status|title }}</p>

            {% if req.user == request.user %}
                <!-- User's own request -->
                <form method="post" action="{% url 'delete_request' req.id %}">
                {% csrf_token %}
                <button class="btn btn-danger">Delete</button>
                </form>
            {% elif req.status != 'fulfilled' %}
                <!-- Request from other user and not fulfilled -->
                <a href="{% url 'offer_help' req.id %}" class="btn btn-primary">Offer Help</a>
            {% else %}
                <!-- Fulfilled request -->
                <span class="badge bg-success">Already Fulfilled</span>
            {% endif %}
            </div>
        </div>
        
    {% endfor %}

</ul>
{% endblock %}
